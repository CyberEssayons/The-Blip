[gd_scene load_steps=36 format=3 uid="uid://bumdj7e27hagu"]

[ext_resource type="Script" path="res://world.gd" id="1_6fgvf"]
[ext_resource type="PackedScene" uid="uid://d4frqd6ime8es" path="res://house_but_cooler.tscn" id="1_10dlk"]
[ext_resource type="Shader" path="res://BaseShader.gdshader" id="2_0v3ta"]
[ext_resource type="Script" path="res://addons/zylann.hterrain/hterrain.gd" id="3_pri1q"]
[ext_resource type="Resource" path="res://TerrainData/data.hterrain" id="4_0p5v2"]
[ext_resource type="Script" path="res://addons/zylann.hterrain/hterrain_texture_set.gd" id="5_i30ql"]
[ext_resource type="PackedScene" uid="uid://ba1vanh70gh6t" path="res://player.tscn" id="6_jjh4v"]
[ext_resource type="AudioStream" uid="uid://b67jilxa6l4rf" path="res://Sounds/locking-door.wav" id="8_35y58"]
[ext_resource type="PackedScene" uid="uid://0fgkxb38w1r0" path="res://TV B.glb" id="8_b7umh"]
[ext_resource type="AudioStream" uid="uid://cl040ssbnwoat" path="res://Sounds/ominous-tension-157906.mp3" id="9_am41a"]
[ext_resource type="VideoStream" path="res://video/FREE_real_VHS_static.ogv" id="9_nsyft"]
[ext_resource type="AudioStream" uid="uid://b2omt1wvb0e4o" path="res://Sounds/white-noise-8117.mp3" id="10_px2lg"]
[ext_resource type="PackedScene" uid="uid://cbyx6nw4jpqn2" path="res://Fridge.tscn" id="11_m3xt7"]
[ext_resource type="PackedScene" uid="uid://obdbgyjifpnx" path="res://Stove.tscn" id="12_4dp2x"]
[ext_resource type="AudioStream" uid="uid://eb4h8jtufwtc" path="res://Sounds/BlipVA-01.wav" id="13_2hgm5"]
[ext_resource type="PackedScene" uid="uid://bgso0scuniipd" path="res://Door.tscn" id="15_c0a02"]
[ext_resource type="PackedScene" uid="uid://bggtllpmbhtqb" path="res://Meshes/glb_LowPoly_Furniture/Bathroom_glb/Toilet Roll Holder.glb" id="16_sw6kl"]
[ext_resource type="PackedScene" uid="uid://cuewojqr16yrj" path="res://toilet.tscn" id="17_ibu6j"]
[ext_resource type="PackedScene" uid="uid://dtmdmbdj3eet7" path="res://shower.tscn" id="18_cqtal"]
[ext_resource type="PackedScene" uid="uid://crbi2igqv4xvi" path="res://sink.tscn" id="19_4unyg"]
[ext_resource type="PackedScene" uid="uid://cs8jflk6pxjfc" path="res://blip_char.tscn" id="20_0vgc0"]
[ext_resource type="AudioStream" uid="uid://ujajxy82xqt1" path="res://Sounds/OminousBuzzing.wav" id="21_xewgi"]
[ext_resource type="AudioStream" uid="uid://bkapw1xpqav2r" path="res://Sounds/Blip_in.wav" id="23_q1aac"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_3onxn"]
sky_top_color = Color(0.113725, 0.141176, 0.184314, 1)
sky_horizon_color = Color(0.329412, 0.337255, 0.34902, 1)
sky_curve = 0.047796
ground_curve = 0.0292818
sun_angle_max = 7.78
sun_curve = 0.974702

[sub_resource type="Sky" id="Sky_fr7xe"]
sky_material = SubResource("ProceduralSkyMaterial_3onxn")
radiance_size = 2

[sub_resource type="Environment" id="Environment_h576c"]
background_mode = 2
background_energy_multiplier = 0.7
sky = SubResource("Sky_fr7xe")
ambient_light_source = 3
reflected_light_source = 2
volumetric_fog_enabled = true
volumetric_fog_emission_energy = 0.0
volumetric_fog_anisotropy = -0.9
volumetric_fog_detail_spread = 2.07053
volumetric_fog_sky_affect = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_mog6w"]
shader = ExtResource("2_0v3ta")
shader_parameter/saturation = 0.75
shader_parameter/contrast = 0.9
shader_parameter/brightness = 0.8

[sub_resource type="Resource" id="Resource_pmyj8"]
script = ExtResource("5_i30ql")
mode = 0
textures = [[], []]

[sub_resource type="BoxShape3D" id="BoxShape3D_paapl"]
size = Vector3(1.78992, 1, 1)

[sub_resource type="ViewportTexture" id="ViewportTexture_wkaqb"]
viewport_path = NodePath("SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wagdh"]
resource_local_to_scene = true
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_wkaqb")
albedo_texture_force_srgb = true

[sub_resource type="PlaneMesh" id="PlaneMesh_760jj"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_wagdh")

[sub_resource type="BoxShape3D" id="BoxShape3D_v71ew"]
size = Vector3(1.91257, 1.00342, 1.68008)

[sub_resource type="BoxShape3D" id="BoxShape3D_r4i6e"]
size = Vector3(0.558472, 1, 1.23444)

[sub_resource type="BoxShape3D" id="BoxShape3D_ud8of"]
size = Vector3(1551.83, 200, 451.379)

[node name="World" type="Node3D"]
script = ExtResource("1_6fgvf")

[node name="House_but_cooler" parent="." instance=ExtResource("1_10dlk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.971723, 3.14204, 4.23726)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_h576c")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.850903, 0.525323, 0, -0.525323, 0.850903, 0, 41.3486, 4.11904)
light_energy = 0.01
light_indirect_energy = 0.279
light_volumetric_fog_energy = 1.19
light_angular_distance = 32.73
sky_mode = 1

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_mog6w")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="HTerrain" type="Node3D" parent="."]
script = ExtResource("3_pri1q")
centered = true
_terrain_data = ExtResource("4_0p5v2")
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource("Resource_pmyj8")
render_layers = 1
cast_shadow = 1
shader_params/u_ground_uv_scale = 20
shader_params/u_depth_blending = true
shader_params/u_triplanar = null
shader_params/u_tile_reduction = null

[node name="Player" parent="." instance=ExtResource("6_jjh4v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.87144, 5.76784, 2.39765)

[node name="ObjectiveContainer" type="VBoxContainer" parent="."]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="Objective" type="Label" parent="ObjectiveContainer"]
layout_mode = 2

[node name="FrontDoorArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.944227, 4.90778, 3.75719)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FrontDoorArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0518188, 0.065557, 0)
shape = SubResource("BoxShape3D_paapl")

[node name="DoorLockSound" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.385286, 5.87131, 4.46794)
stream = ExtResource("8_35y58")
bus = &"SFX"

[node name="TenseMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_am41a")
volume_db = -26.234
bus = &"Music"

[node name="TV B" parent="." instance=ExtResource("8_b7umh")]
transform = Transform3D(-0.000857349, 0, 0.00185369, 0, 0.00204235, 0, -0.00185369, 0, -0.000857349, -7.36206, 5.71027, 3.25578)

[node name="TVScreen" type="MeshInstance3D" parent="."]
transform = Transform3D(0.337026, 0.666297, 0.00272337, -0.0254426, 0.0046904, 0.469867, 0.785132, -0.285863, 0.0140572, -7.3064, 6.04486, 3.25228)
mesh = SubResource("PlaneMesh_760jj")

[node name="SubViewport" type="SubViewport" parent="."]
handle_input_locally = false
size = Vector2i(640, 480)
render_target_update_mode = 4

[node name="VideoStreamPlayer" type="VideoStreamPlayer" parent="SubViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stream = ExtResource("9_nsyft")

[node name="TVStatic" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(-0.419785, 0, 0.907624, 0, 1, 0, -0.907624, 0, -0.419785, -7.36206, 6.68731, 3.25578)
stream = ExtResource("10_px2lg")
bus = &"SFX"

[node name="DisembodiedVoice" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.40028, 5.59133, -13.8832)
stream = ExtResource("13_2hgm5")
bus = &"SFX"

[node name="MBEntrance1" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.99207, 4.96931, -5.59814)

[node name="CollisionShape3D" type="CollisionShape3D" parent="MBEntrance1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.120045, 0, 0.311482)
shape = SubResource("BoxShape3D_v71ew")

[node name="MBEntrance2" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.7323, 4.96931, -13.0669)

[node name="CollisionShape3D" type="CollisionShape3D" parent="MBEntrance2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.48907, -0.00170898, -0.0877037)
shape = SubResource("BoxShape3D_v71ew")

[node name="BedroomEntrance1" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.97988, 5.06498, 2.61493)

[node name="CollisionShape3D" type="CollisionShape3D" parent="BedroomEntrance1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.220764, 0, -0.0233459)
shape = SubResource("BoxShape3D_r4i6e")

[node name="Blip1Spawn1" type="Node3D" parent="BedroomEntrance1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.02494, -0.57715, 0)

[node name="BedroomEntrance2" type="Area3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 6.91542, 5.06498, -1.74527)

[node name="CollisionShape3D" type="CollisionShape3D" parent="BedroomEntrance2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.220764, 0, -0.0233459)
shape = SubResource("BoxShape3D_r4i6e")

[node name="Blip1Spawn2" type="Node3D" parent="BedroomEntrance2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.05955, -0.592558, 0)

[node name="CanReachTV" type="Area3D" parent="."]
transform = Transform3D(-0.000857349, 0, 0.00185369, 0, 0.00204235, 0, -0.00185369, 0, -0.000857349, -6.28227, 5.2429, 3.25578)

[node name="CollisionShape3D" type="CollisionShape3D" parent="CanReachTV"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 428.212, 0, 125.688)
shape = SubResource("BoxShape3D_ud8of")

[node name="PlayerHintContainer" type="VBoxContainer" parent="."]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.0
offset_right = 20.0
offset_bottom = 40.0
grow_horizontal = 2

[node name="PlayerHintLabel" type="Label" parent="PlayerHintContainer"]
layout_mode = 2

[node name="Fridge" parent="." instance=ExtResource("11_m3xt7")]
transform = Transform3D(1.45156, 0, 0, 0, 1.45156, 0, 0, 0, 1.45156, -2.49946, 5.51849, -13.8988)

[node name="Stove" parent="." instance=ExtResource("12_4dp2x")]
transform = Transform3D(1.42131, 0, 0, 0, 1.42131, 0, 0, 0, 1.42131, -5.91271, 4.94765, -13.9654)

[node name="Timer" type="Timer" parent="."]
wait_time = 0.5

[node name="FrontDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.858885, 4.50035, 4.33834)
DoorName = &"Front"
allowOpen = false

[node name="PlayerBedroomBathroomDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(0.751483, 0, 0, 0, 1, 0, 0, 0, 1, 6.90784, 4.50142, -2.33034)
DoorName = &"PlayerBedroomBathroomDoor"

[node name="PlayerBedroomDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(1.49012e-08, 0, 1, 0, 1, 0, -0.751483, 0, 2.98023e-08, 2.2478, 4.50142, 2.50962)
DoorName = &"PlayerBedroomDoor"

[node name="MasterBedroomBathroomDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(0.751483, 0, 0, 0, 1, 0, 0, 0, 1, 6.90784, 4.50142, -6.09228)
DoorName = &"MasterBedroomBathroomDoor"

[node name="MasterBedroomKitchenDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(-3.28484e-08, 0, -1, 0, 1, 0, 0.751483, 0, -4.37114e-08, 2.29351, 4.50142, -13.1243)
DoorName = &"MasterBedroomKitchenDoor"

[node name="BackDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(0.883232, 0, 0, 0, 1, 0, 0, 0, 1, 0.841998, 4.50142, -14.624)
DoorName = &"BackDoor"
allowOpen = false

[node name="BathroomDoor" parent="." instance=ExtResource("15_c0a02")]
transform = Transform3D(-3.28484e-08, 0, -1, 0, 1, 0, 0.751483, 0, -4.37114e-08, 0.539031, 4.4988, -4.8627)
DoorName = &"BathroomDoor"

[node name="Toilet Roll Holder" parent="." instance=ExtResource("16_sw6kl")]
transform = Transform3D(0.0036059, 0, 0, 0, 0.0036059, 0, 0, 0, 0.0036059, 9.55726, 5.38758, -5.85168)

[node name="Toilet" parent="." instance=ExtResource("17_ibu6j")]
transform = Transform3D(-1.2537e-10, 0, -0.00286813, 0, 0.00286813, 0, 0.00286813, 0, -1.2537e-10, 9.95237, 5.33505, -5.20329)

[node name="Shower" parent="." instance=ExtResource("18_cqtal")]
transform = Transform3D(1.16415e-10, 0, -0.00318823, 0, 0.00318823, 0, 0.00318823, 0, 1.16415e-10, 9.78811, 5.67993, -3.14989)

[node name="BlipChar" parent="." instance=ExtResource("20_0vgc0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.66035, 0.432654, 0.0450082)
origin = Vector3(6.66, 0.433, 0.045)

[node name="BlipInSound" type="AudioStreamPlayer3D" parent="BlipChar"]
stream = ExtResource("21_xewgi")
volume_db = 11.532
bus = &"SFX"

[node name="Sink" parent="." instance=ExtResource("19_4unyg")]
transform = Transform3D(-0.8, 0, 6.99382e-08, 0, 0.8, 0, -6.99382e-08, 0, -0.8, 4.14188, 4.43499, -2.65873)

[node name="ElectroStatic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("23_q1aac")
bus = &"SFX"

[connection signal="body_entered" from="FrontDoorArea" to="." method="on_player_canReach_FrontDoor"]
[connection signal="body_exited" from="FrontDoorArea" to="." method="on_player_cantReach_FrontDoor"]
[connection signal="finished" from="DoorLockSound" to="." method="_on_door_lock_sound_finished"]
[connection signal="finished" from="TVStatic" to="." method="on_tv_static_finished"]
[connection signal="finished" from="DisembodiedVoice" to="." method="_on_disembodied_voice_finished"]
[connection signal="body_entered" from="MBEntrance1" to="." method="_on_mb_entrance_1_body_entered"]
[connection signal="body_entered" from="MBEntrance1" to="." method="On_mb_entrance_entered"]
[connection signal="body_entered" from="MBEntrance2" to="." method="_on_mb_entrance_2_body_entered"]
[connection signal="body_entered" from="MBEntrance2" to="." method="On_mb_entrance_entered"]
[connection signal="body_entered" from="BedroomEntrance1" to="." method="_on_bedroom_entrance_1_body_entered"]
[connection signal="body_entered" from="BedroomEntrance2" to="." method="_on_bedroom_entrance_2_body_entered"]
[connection signal="body_entered" from="CanReachTV" to="." method="on_can_reach_TV_entered"]
[connection signal="body_exited" from="CanReachTV" to="." method="on_can_reach_tv_exited"]
[connection signal="timeout" from="Timer" to="." method="on_Timer_finished"]
